<div
  *ngIf="folder$ | async as folder"
  class="folder-list-item"
>
  <div (click)="opened = !opened" class="folder-list-item__content">
    <app-checkbox [formControl]="checkedForm"></app-checkbox>
    <img src="/assets/images/icons/folder.svg" />
    <span>{{ folder.name }}</span>
    <img [class.rotated]="opened" src="/assets/images/icons/right-arrow.svg" />
  </div>
  <ng-container *ngLet="selectedRoute$ | async as selectedRoute">
    <ng-container *ngIf="selectedRoutes$ | async as selectedRoutes">
      <div
        *ngIf="opened"
        [attr.data-id]="folder.id"
        class="folder-list-item__routes"
        dragula="routes"
        [dragulaModel]="(routes$ | async) ?? []"
      >
        <app-route-list-item
          [attr.data-id]="route.id"
          [checked]="selectedRoutes.has(route.id)"
          (checkedChanges)="handleChecked(route.id, $event)"
          [rounded]="false"
          (click)="selectRoute(route.id)"
          [isSelected]="selectedRoute === route.id"
          [route]="route"
          *ngFor="let route of (routes$ | async) ?? []; trackBy: trackByRoute"
        ></app-route-list-item>
      </div>
    </ng-container>
  </ng-container>
</div>
