<div
  *ngIf="folder$ | async as folder"
  (cdkDragStarted)="draggingStart.emit()"
  (cdkDragEnded)="draggingEnd.emit()"
  class="folder-list-item"
  [class.dropping]="isDropping"
  cdkDragPreviewClass="height-fit"
  cdkDrag
>
  <div (click)="opened = !opened" class="folder-list-item__content">
    <app-checkbox [formControl]="checkedForm"></app-checkbox>
    <img src="/assets/images/icons/folder.svg" />
    <span>{{ folder.name }}</span>
    <img [class.rotated]="opened" src="/assets/images/icons/right-arrow.svg" />
  </div>
  <div
    cdkDropList
    (cdkDropListDropped)="handleDrop($event)"
    *ngIf="opened"
    class="folder-list-item__routes"
  >
    <ng-container *ngIf="{ value: selectedRoute$ | async } as selectedRoute">
      <app-route-list-item
        [rounded]="false"
        (click)="selectRoute(route.id)"
        [isSelected]="selectedRoute.value === route.id"
        [route]="route"
        *ngFor="let route of routes$ | async; trackBy: trackByRoute"
      ></app-route-list-item>
    </ng-container>
  </div>
  <div class="folder-list-item__placeholder" *cdkDragPlaceholder></div>
</div>
